import{_ as b,o as d,c,a as t,F as r,g as u,h as m,t as l,n as y,d as _,i as v,v as f}from"./index-539e02e7.js";const{VITE_APP_URL:h,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"jlhex2",BASE_URL:"/Vue_Final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{products:[],productId:"",cart:{},loadingItem:""}},methods:{getCarts(){const s=`${h}/v2/api/${g}/cart`;this.$http.get(s).then(n=>{this.cart=n.data.data,console.log("購物車",n.data)}).catch(n=>{console.log(n.res.data.message),console.log("can't get carts Data")})},updateCartItem(s){const n={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${h}/v2/api/${g}/cart/${s.id}`,{data:n}).then(a=>{console.log("更新購物車",a.data),this.getCarts(),this.loadingItem=""}).catch(a=>{console.log(a.res.data.message),console.log("can't get update Data")})},deleteItem(s){const n=`${h}/v2/api/${g}/cart/${s.id}`;this.loadingItem=s.id,this.$http.delete(n).then(a=>{console.log("刪除購物車",a.data),this.loadingItem="",this.getCarts()}).catch(a=>{console.log(a.res.data.message),console.log("can't get delete Data")})}},mounted(){this.getCarts()}},C={class:"table align-middle"},I={style:{width:"200px"}},x={key:0,class:"h5"},V={key:1},P={class:"h6"},$={class:"h5"},D={class:"btn-group btn-group-sm"},E=["onClick"],T=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),A=["onClick"],S=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),U=t("div",{class:"text-end"},null,-1),R={class:"table align-middle"},q=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("button",{class:"btn btn-outline-danger",type:"button"}," 清空購物車 ")])],-1),w=["onClick","disabled"],B=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),L={class:"input-group input-group-sm"},F=["onUpdate:modelValue","disabled","onChange"],M=["value"],N={class:"text-end"},z=t("td",{colspan:"3",class:"text-end"},"總計",-1),H={class:"text-end"},O=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),j={class:"text-end text-success"};function G(s,n,a,J,i,p){return d(),c(r,null,[t("table",C,[t("tbody",null,[(d(!0),c(r,null,u(i.products,e=>(d(),c("tr",{key:e.id},[t("td",I,[t("div",{style:y([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,l(e.title),1),t("td",null,[e.price==e.origin_price?(d(),c("div",x,l(e.price)+" 元",1)):(d(),c("div",V,[t("del",P,"原價 "+l(e.origin_price)+" 元",1),t("div",$,"現在只要 "+l(e.price)+" 元",1)]))]),t("td",null,[t("div",D,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>s.openModal(e.id)},[T,_(" 查看更多 ")],8,E),t("button",{type:"button",class:"btn btn-outline-danger",onClick:o=>s.addToCart(e.id)},[S,_(" 加到購物車 ")],8,A)])])]))),128))])]),U,t("table",R,[q,t("tbody",null,[i.cart.carts?(d(!0),c(r,{key:0},u(i.cart.carts,e=>(d(),c("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>p.deleteItem(e),disabled:e.id===i.loadingItem},[B,_(" x ")],8,w)]),t("td",null,l(e.product.title),1),t("td",null,[t("div",L,[v(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>e.qty=o,disabled:e.id===i.loadingItem,onChange:o=>p.updateCartItem(e)},[(d(),c(r,null,u(20,o=>t("option",{value:o,key:o+"1234578"},l(o),9,M)),64))],40,F),[[f,e.qty]])])]),t("td",N,l(e.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[z,t("td",H,l(i.cart.total),1)]),t("tr",null,[O,t("td",j,l(i.cart.final_total),1)])])])],64)}const Q=b(k,[["render",G]]);export{Q as default};
